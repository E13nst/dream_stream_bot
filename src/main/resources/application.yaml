server:
  port: 8080

spring:
  application:
    name: telegram-bot-dream-stream
  ai:
    openai:
      api-key: ${OPENAI_API_KEY}
      chat:
        options:
          model: gpt-4o
          temperature: 0.9
      proxy:
        host: ${OPENAI_PROXY_HOST:}
        port: ${OPENAI_PROXY_PORT:}
        username: ${OPENAI_PROXY_USERNAME:}
        password: ${OPENAI_PROXY_PASSWORD:}
  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:mindbase}
    username: ${DB_USERNAME:dalek}
    password: ${DB_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver
    hikari:
      connection-timeout: 10000
      maximum-pool-size: 5
      minimum-idle: 2
      leak-detection-threshold: 30000
      connection-test-query: SELECT 1
      auto-commit: false
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        format_sql: false
        use_sql_comments: false
        jdbc:
          batch_size: 20
          time_zone: UTC
        connection:
          provider_disables_autocommit: true
  data:
    redis:
      host: ${REDIS_HOST:redis-e13nst.amvera.io}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      database: ${REDIS_DATABASE:0}
      timeout: 10s
      ssl:
        enabled: true
        bundle: NONE

# Swagger/OpenAPI конфигурация
springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    operations-sorter: method
    tags-sorter: alpha
    try-it-out-enabled: true
    filter: true
  default-produces-media-type: application/json
  default-consumes-media-type: application/json

# Подробное логирование для диагностики
logging:
  level:
    org.springframework.jdbc: INFO
    org.hibernate.SQL: INFO
    org.hibernate.type.descriptor.sql.BasicBinder: INFO
    com.zaxxer.hikari: INFO
    org.springframework.orm.jpa: INFO
    com.example.dream_stream_bot: DEBUG
    org.springframework.boot.autoconfigure: INFO
    org.springframework.security: DEBUG
  
